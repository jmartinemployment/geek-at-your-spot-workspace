import{a as x}from"./chunk-JYWANAJK.js";import{a as O,b as _,e as N,g as B,h as T,i as A,k as D}from"./chunk-4ZUVIGTG.js";import{a as k}from"./chunk-R3ZE6C4I.js";import{$a as I,C as r,Ha as L,J as f,La as h,Sa as P,T as b,U as y,V as C,W as c,X as t,Y as n,Z as m,ca as u,ja as a,ka as v,la as E,o as g,v as d,xa as S,ya as M}from"./chunk-GXYEV7RV.js";function w(s,R){if(s&1&&(t(0,"option",20),a(1),S(2,"titlecase"),n()),s&2){let e=R.$implicit;c("value",e),r(),v(M(2,2,e))}}var K=(()=>{class s{policyService=g(I);policies=d([]);loading=d(!0);searchTerm=d("");filterStatus=d("");filterLOB=d("");columns=[{key:"policyNumber",label:"Policy #",type:"link",linkPrefix:"/policies"},{key:"lineOfBusiness",label:"Line of Business",type:"badge",badgeClass:this.getLOBBadgeClass},{key:"policyStatus",label:"Status",type:"badge",badgeClass:this.getStatusBadgeClass},{key:"effectiveDate",label:"Effective",type:"date"},{key:"expirationDate",label:"Expiration",type:"date"},{key:"writtenPremium",label:"Premium",type:"currency"},{key:"carrierName",label:"Carrier"}];ngOnInit(){this.loadPolicies()}loadPolicies(){this.loading.set(!0),this.policyService.list().subscribe({next:e=>{this.policies.set(e.items),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}getLOBBadgeClass(e){return{PERSONAL_AUTO:"bg-info",COMMERCIAL_AUTO:"bg-primary",HOMEOWNERS:"bg-success",COMMERCIAL_PROPERTY:"bg-warning text-dark",GENERAL_LIABILITY:"bg-secondary",WORKERS_COMP:"bg-dark",UMBRELLA:"bg-purple"}[e]||"bg-secondary"}getStatusBadgeClass(e){return{ACTIVE:"bg-success",PENDING:"bg-warning text-dark",EXPIRED:"bg-danger",CANCELLED:"bg-dark"}[e]||"bg-secondary"}get filteredPolicies(){let e=this.policies(),o=this.searchTerm().toLowerCase(),i=this.filterStatus(),p=this.filterLOB();return o&&(e=e.filter(l=>l.policyNumber.toLowerCase().includes(o)||l.carrierName?.toLowerCase().includes(o))),i&&(e=e.filter(l=>l.policyStatus===i)),p&&(e=e.filter(l=>l.lineOfBusiness===p)),e}get uniqueLOBs(){return[...new Set(this.policies().map(e=>e.lineOfBusiness))]}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=f({type:s,selectors:[["app-policy-list"]],decls:37,vars:7,consts:[["title","Policies","subtitle","Manage insurance policies"],["routerLink","/policies/new",1,"btn","btn-primary"],[1,"bi","bi-plus-lg","me-1"],[1,"container-fluid","px-4"],[1,"card","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Search by policy number...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","ACTIVE"],["value","PENDING"],["value","EXPIRED"],["value","CANCELLED"],[1,"col-md-3"],[3,"value"],[1,"col-md-3","text-end"],[1,"text-muted"],[1,"card"],[1,"card-body","p-0"],["emptyMessage","No policies found",3,"columns","data","loading"]],template:function(o,i){o&1&&(t(0,"app-navbar",0)(1,"a",1),m(2,"i",2),a(3," Add Policy "),n()(),t(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"span",9),m(11,"i",10),n(),t(12,"input",11),u("ngModelChange",function(l){return i.searchTerm.set(l)}),n()()(),t(13,"div",12)(14,"select",13),u("ngModelChange",function(l){return i.filterStatus.set(l)}),t(15,"option",14),a(16,"All Statuses"),n(),t(17,"option",15),a(18,"Active"),n(),t(19,"option",16),a(20,"Pending"),n(),t(21,"option",17),a(22,"Expired"),n(),t(23,"option",18),a(24,"Cancelled"),n()()(),t(25,"div",19)(26,"select",13),u("ngModelChange",function(l){return i.filterLOB.set(l)}),t(27,"option",14),a(28,"All Lines"),n(),y(29,w,3,4,"option",20,b),n()(),t(31,"div",21)(32,"span",22),a(33),n()()()()(),t(34,"div",23)(35,"div",24),m(36,"app-data-table",25),n()()()),o&2&&(r(12),c("ngModel",i.searchTerm()),r(2),c("ngModel",i.filterStatus()),r(12),c("ngModel",i.filterLOB()),r(3),C(i.uniqueLOBs),r(4),E(" ",i.filteredPolicies.length," policies "),r(3),c("columns",i.columns)("data",i.filteredPolicies)("loading",i.loading()))},dependencies:[h,P,D,T,A,O,B,_,N,k,x,L],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.bg-purple[_ngcontent-%COMP%]{background-color:#6f42c1!important}"]})}return s})();export{K as PolicyListComponent};
