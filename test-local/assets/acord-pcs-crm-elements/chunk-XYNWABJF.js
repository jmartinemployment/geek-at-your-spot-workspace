import{a as O}from"./chunk-X3P5IQZN.js";import{a as k}from"./chunk-R3ZE6C4I.js";import{B as S,C as l,Ga as y,Ia as T,J as g,Ka as I,La as N,Pa as w,R as m,S as r,Sa as M,T as E,U as D,V as L,W as f,X as n,Y as t,Z as o,cb as P,da as s,ja as a,ka as c,la as u,ma as h,o as v,v as _,xa as x,ya as C}from"./chunk-GXYEV7RV.js";function A(i,d){i&1&&(n(0,"button",3),o(1,"i",8),a(2," Edit "),t())}function B(i,d){i&1&&o(0,"app-loading",5)}function Q(i,d){if(i&1&&(n(0,"div",6),o(1,"i",9),a(2),t()),i&2){let e=s();l(2),u(" ",e.error()," ")}}function F(i,d){if(i&1&&(n(0,"div",17)(1,"label",18),a(2,"Company Name"),t(),n(3,"p",46),a(4),t()()),i&2){let e=s(2);l(4),c(e.lead().companyName)}}function W(i,d){if(i&1&&(n(0,"a",25),a(1),t()),i&2){let e=s(2);f("href","mailto:"+e.lead().email,S),l(),c(e.lead().email)}}function U(i,d){i&1&&a(0," \u2014 ")}function j(i,d){if(i&1&&(n(0,"span",47),a(1),t()),i&2){let e=d.$implicit;l(),c(e)}}function $(i,d){if(i&1&&D(0,j,2,1,"span",47,E),i&2){let e=s(2);L(e.lead().interestedLines)}}function q(i,d){i&1&&(n(0,"span",28),a(1,"Not specified"),t())}function R(i,d){if(i&1&&(n(0,"div")(1,"label",18),a(2,"Notes"),t(),n(3,"p",21),a(4),t()()),i&2){let e=s(2);l(4),c(e.lead().notes)}}function z(i,d){if(i&1&&(n(0,"div",35)(1,"span",28),a(2,"Contacted"),t(),n(3,"span"),a(4),x(5,"date"),t()()),i&2){let e=s(2);l(4),c(C(5,1,e.lead().contactedDate))}}function V(i,d){if(i&1&&(n(0,"div",35)(1,"span",28),a(2,"Quoted"),t(),n(3,"span"),a(4),x(5,"date"),t()()),i&2){let e=s(2);l(4),c(C(5,1,e.lead().quotedDate))}}function G(i,d){i&1&&(n(0,"button",3),o(1,"i",48),a(2," Mark as Contacted "),t())}function H(i,d){i&1&&(n(0,"button",40),o(1,"i",49),a(2," Mark as Qualified "),t())}function J(i,d){i&1&&(n(0,"button",41),o(1,"i",50),a(2," Create Quote "),t())}function K(i,d){i&1&&(n(0,"button",42),o(1,"i",51),a(2," Mark as Won "),t())}function X(i,d){i&1&&(n(0,"button",45),o(1,"i",52),a(2," Mark as Lost "),t())}function Y(i,d){i&1&&(n(0,"button",42),o(1,"i",53),a(2," Convert to Customer "),t())}function Z(i,d){if(i&1&&(n(0,"div",7)(1,"div",10)(2,"div",11)(3,"div",12)(4,"h5",13),o(5,"i",14),a(6," Lead Information "),t()(),n(7,"div",15)(8,"div",16),m(9,F,5,1,"div",17),n(10,"div",17)(11,"label",18),a(12,"Contact Name"),t(),n(13,"p",19),a(14),t()(),n(15,"div",20)(16,"label",18),a(17,"Status"),t(),n(18,"p",21)(19,"span",22),a(20),t()()(),n(21,"div",20)(22,"label",18),a(23,"Source"),t(),n(24,"p",21),a(25),t()(),n(26,"div",20)(27,"label",18),a(28,"Days in Pipeline"),t(),n(29,"p",21),a(30),t()()()()(),n(31,"div",11)(32,"div",12)(33,"h5",13),o(34,"i",23),a(35," Contact Information "),t()(),n(36,"div",15)(37,"div",16)(38,"div",17)(39,"label",18),a(40,"Email"),t(),n(41,"p",21),o(42,"i",24),m(43,W,2,2,"a",25)(44,U,1,0),t()(),n(45,"div",17)(46,"label",18),a(47,"Phone"),t(),n(48,"p",21),o(49,"i",23),a(50),t()()()()(),n(51,"div",11)(52,"div",12)(53,"h5",13),o(54,"i",26),a(55," Insurance Interests "),t()(),n(56,"div",15)(57,"div",27)(58,"label",18),a(59,"Interested Lines of Business"),t(),n(60,"p",21),m(61,$,2,0)(62,q,2,0,"span",28),t()(),m(63,R,5,1,"div"),t()()(),n(64,"div",29)(65,"div",11)(66,"div",12)(67,"h5",13),o(68,"i",30),a(69," Estimated Value "),t()(),n(70,"div",15)(71,"div",31)(72,"span",32),a(73),x(74,"currency"),t(),n(75,"p",33),a(76,"Estimated Annual Premium"),t()()()(),n(77,"div",11)(78,"div",12)(79,"h5",13),o(80,"i",34),a(81," Timeline "),t()(),n(82,"div",15)(83,"div",35)(84,"span",28),a(85,"Lead Date"),t(),n(86,"span"),a(87),x(88,"date"),t()(),m(89,z,6,3,"div",35),m(90,V,6,3,"div",35),n(91,"div",36)(92,"span",28),a(93,"Assigned To"),t(),n(94,"span"),a(95),t()()()(),n(96,"div",37)(97,"div",12)(98,"h5",13),o(99,"i",38),a(100," Actions "),t()(),n(101,"div",15)(102,"div",39),m(103,G,3,0,"button",3),m(104,H,3,0,"button",40),m(105,J,3,0,"button",41),m(106,K,3,0,"button",42),n(107,"button",43),o(108,"i",44),a(109," Schedule Follow-up "),t(),m(110,X,3,0,"button",45),m(111,Y,3,0,"button",42),t()()()()()),i&2){let e=s();l(9),r(e.lead().companyName?9:-1),l(5),h("",e.lead().firstName," ",e.lead().lastName),l(5),f("ngClass",e.getStatusClass(e.lead().leadStatus)),l(),u(" ",e.lead().leadStatus," "),l(5),c(e.lead().leadSource||"\u2014"),l(5),u("",e.daysSinceCreated," days"),l(13),r(e.lead().email?43:44),l(7),u(" ",e.lead().phone||"\u2014"," "),l(11),r(e.lead().interestedLines&&e.lead().interestedLines.length>0?61:62),l(2),r(e.lead().notes?63:-1),l(10),u(" ",C(74,22,e.lead().estimatedPremium)," "),l(14),c(C(88,24,e.lead().leadDate)),l(2),r(e.lead().contactedDate?89:-1),l(),r(e.lead().quotedDate?90:-1),l(5),c(e.lead().assignedTo||"\u2014"),l(8),r(e.lead().leadStatus==="NEW"?103:-1),l(),r(e.lead().leadStatus==="CONTACTED"?104:-1),l(),r(e.lead().leadStatus==="QUALIFIED"?105:-1),l(),r(e.lead().leadStatus==="QUOTED"?106:-1),l(4),r(e.lead().leadStatus!=="WON"&&e.lead().leadStatus!=="LOST"?110:-1),l(),r(e.lead().leadStatus==="WON"?111:-1)}}var re=(()=>{class i{route=v(w);leadService=v(P);lead=_(null);loading=_(!0);error=_(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&e!=="new"?this.loadLead(e):this.loading.set(!1)}loadLead(e){this.leadService.getById(e).subscribe({next:p=>{this.lead.set(p),this.loading.set(!1)},error:()=>{this.error.set("Failed to load lead"),this.loading.set(!1)}})}getStatusClass(e){return{NEW:"bg-info",CONTACTED:"bg-primary",QUALIFIED:"bg-warning text-dark",QUOTED:"bg-purple",WON:"bg-success",LOST:"bg-danger"}[e]||"bg-secondary"}get displayName(){let e=this.lead();return e?e.companyName||`${e.firstName} ${e.lastName}`:""}get daysSinceCreated(){let e=this.lead();if(!e)return 0;let p=new Date(e.leadDate);return Math.ceil((new Date().getTime()-p.getTime())/(1e3*60*60*24))}static \u0275fac=function(p){return new(p||i)};static \u0275cmp=g({type:i,selectors:[["app-lead-detail"]],decls:9,vars:3,consts:[["subtitle","Lead Details",3,"title"],["routerLink","/leads",1,"btn","btn-outline-secondary","me-2"],[1,"bi","bi-arrow-left","me-1"],[1,"btn","btn-primary"],[1,"container-fluid","px-4"],["message","Loading lead details..."],[1,"alert","alert-danger"],[1,"row"],[1,"bi","bi-pencil","me-1"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"col-lg-8"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-person-plus","me-2"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label","text-muted","small"],[1,"mb-0","fw-medium"],[1,"col-md-4"],[1,"mb-0"],[1,"badge",3,"ngClass"],[1,"bi","bi-telephone","me-2"],[1,"bi","bi-envelope","me-2"],[3,"href"],[1,"bi","bi-card-checklist","me-2"],[1,"mb-3"],[1,"text-muted"],[1,"col-lg-4"],[1,"bi","bi-currency-dollar","me-2"],[1,"text-center"],[1,"fs-2","fw-bold","text-success"],[1,"text-muted","mb-0"],[1,"bi","bi-clock-history","me-2"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-flex","justify-content-between"],[1,"card"],[1,"bi","bi-lightning","me-2"],[1,"d-grid","gap-2"],[1,"btn","btn-warning"],[1,"btn","btn-purple"],[1,"btn","btn-success"],[1,"btn","btn-outline-secondary"],[1,"bi","bi-calendar-plus","me-1"],[1,"btn","btn-outline-danger"],[1,"mb-0","fw-bold","fs-5"],[1,"badge","bg-primary","me-1","mb-1"],[1,"bi","bi-telephone","me-1"],[1,"bi","bi-check-circle","me-1"],[1,"bi","bi-file-text","me-1"],[1,"bi","bi-trophy","me-1"],[1,"bi","bi-x-circle","me-1"],[1,"bi","bi-person-plus","me-1"]],template:function(p,b){p&1&&(n(0,"app-navbar",0)(1,"a",1),o(2,"i",2),a(3," Back "),t(),m(4,A,3,0,"button",3),t(),n(5,"div",4),m(6,B,1,0,"app-loading",5)(7,Q,3,1,"div",6)(8,Z,112,26,"div",7),t()),p&2&&(f("title",b.displayName||"New Lead"),l(4),r(b.lead()?4:-1),l(2),r(b.loading()?6:b.error()?7:b.lead()?8:-1))},dependencies:[N,y,M,k,O,I,T],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e9ecef}.form-label[_ngcontent-%COMP%]{margin-bottom:.25rem}.bg-purple[_ngcontent-%COMP%]{background-color:#6f42c1!important}.btn-purple[_ngcontent-%COMP%]{background-color:#6f42c1;border-color:#6f42c1;color:#fff}.btn-purple[_ngcontent-%COMP%]:hover{background-color:#5a32a3;border-color:#5a32a3;color:#fff}"]})}return i})();export{re as LeadDetailComponent};
