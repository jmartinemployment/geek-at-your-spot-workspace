import{a as w}from"./chunk-JYWANAJK.js";import{a as N,b as x,e as D,g as M,h as P,i as R,k as O}from"./chunk-4ZUVIGTG.js";import{a as _}from"./chunk-R3ZE6C4I.js";import{C as r,J as C,Ka as f,La as E,Sa as h,W as c,X as e,Y as t,Z as p,ab as I,ca as g,ja as a,ka as m,la as y,o as S,v as s,xa as b,ya as v}from"./chunk-GXYEV7RV.js";var j=(()=>{class d{claimService=S(I);claims=s([]);loading=s(!0);searchTerm=s("");filterStatus=s("");columns=[{key:"claimNumber",label:"Claim #",type:"link",linkPrefix:"/claims"},{key:"policy.policyNumber",label:"Policy #"},{key:"claimStatus",label:"Status",type:"badge",badgeClass:this.getStatusBadgeClass},{key:"lossDate",label:"Loss Date",type:"date"},{key:"reportedDate",label:"Reported",type:"date"},{key:"totalReserve",label:"Reserve",type:"currency"},{key:"totalPaid",label:"Paid",type:"currency"}];ngOnInit(){this.loadClaims()}loadClaims(){this.loading.set(!0),this.claimService.list().subscribe({next:i=>{this.claims.set(i.items),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}getStatusBadgeClass(i){return{OPEN:"bg-warning text-dark",IN_PROGRESS:"bg-info",UNDER_REVIEW:"bg-primary",APPROVED:"bg-success",DENIED:"bg-danger",CLOSED:"bg-secondary"}[i]||"bg-secondary"}get filteredClaims(){let i=this.claims(),l=this.searchTerm().toLowerCase(),n=this.filterStatus();return l&&(i=i.filter(o=>o.claimNumber.toLowerCase().includes(l)||o.policy?.policyNumber?.toLowerCase().includes(l))),n&&(i=i.filter(o=>o.claimStatus===n)),i}get openClaimsCount(){return this.claims().filter(i=>i.claimStatus==="OPEN"||i.claimStatus==="IN_PROGRESS").length}get totalReserves(){return this.claims().reduce((i,l)=>i+(l.totalReserve||0),0)}get totalPaid(){return this.claims().reduce((i,l)=>i+(l.totalPaid||0),0)}static \u0275fac=function(l){return new(l||d)};static \u0275cmp=C({type:d,selectors:[["app-claim-list"]],decls:66,vars:14,consts:[["title","Claims","subtitle","Manage insurance claims"],["routerLink","/claims/new",1,"btn","btn-primary"],[1,"bi","bi-plus-lg","me-1"],[1,"container-fluid","px-4"],[1,"row","mb-4"],[1,"col-md-3"],[1,"card","bg-warning","bg-opacity-10","border-warning"],[1,"card-body","text-center"],[1,"text-warning","mb-0"],[1,"text-muted"],[1,"card","bg-info","bg-opacity-10","border-info"],[1,"text-info","mb-0"],[1,"card","bg-success","bg-opacity-10","border-success"],[1,"text-success","mb-0"],[1,"card","bg-secondary","bg-opacity-10"],[1,"mb-0"],[1,"card","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-5"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Search by claim or policy number...",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","OPEN"],["value","IN_PROGRESS"],["value","UNDER_REVIEW"],["value","APPROVED"],["value","DENIED"],["value","CLOSED"],[1,"col-md-4","text-end"],[1,"card"],[1,"card-body","p-0"],["emptyMessage","No claims found",3,"columns","data","loading"]],template:function(l,n){l&1&&(e(0,"app-navbar",0)(1,"a",1),p(2,"i",2),a(3," New Claim "),t()(),e(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h3",8),a(10),t(),e(11,"small",9),a(12,"Open Claims"),t()()()(),e(13,"div",5)(14,"div",10)(15,"div",7)(16,"h3",11),a(17),b(18,"currency"),t(),e(19,"small",9),a(20,"Total Reserves"),t()()()(),e(21,"div",5)(22,"div",12)(23,"div",7)(24,"h3",13),a(25),b(26,"currency"),t(),e(27,"small",9),a(28,"Total Paid"),t()()()(),e(29,"div",5)(30,"div",14)(31,"div",7)(32,"h3",15),a(33),t(),e(34,"small",9),a(35,"Total Claims"),t()()()()(),e(36,"div",16)(37,"div",17)(38,"div",18)(39,"div",19)(40,"div",20)(41,"span",21),p(42,"i",22),t(),e(43,"input",23),g("ngModelChange",function(u){return n.searchTerm.set(u)}),t()()(),e(44,"div",5)(45,"select",24),g("ngModelChange",function(u){return n.filterStatus.set(u)}),e(46,"option",25),a(47,"All Statuses"),t(),e(48,"option",26),a(49,"Open"),t(),e(50,"option",27),a(51,"In Progress"),t(),e(52,"option",28),a(53,"Under Review"),t(),e(54,"option",29),a(55,"Approved"),t(),e(56,"option",30),a(57,"Denied"),t(),e(58,"option",31),a(59,"Closed"),t()()(),e(60,"div",32)(61,"span",9),a(62),t()()()()(),e(63,"div",33)(64,"div",34),p(65,"app-data-table",35),t()()()),l&2&&(r(10),m(n.openClaimsCount),r(7),m(v(18,10,n.totalReserves)),r(8),m(v(26,12,n.totalPaid)),r(8),m(n.claims().length),r(10),c("ngModel",n.searchTerm()),r(2),c("ngModel",n.filterStatus()),r(17),y(" ",n.filteredClaims.length," claims "),r(3),c("columns",n.columns)("data",n.filteredClaims)("loading",n.loading()))},dependencies:[E,h,O,P,R,N,M,x,D,_,w,f],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}"]})}return d})();export{j as ClaimListComponent};
