import{a as L}from"./chunk-X3P5IQZN.js";import{a as A}from"./chunk-R3ZE6C4I.js";import{$a as F,C as l,Ga as T,Ia as w,J as h,Ka as N,La as B,Pa as M,R as m,S as p,Sa as k,U as v,V as C,W as f,X as i,Y as t,Z as d,da as c,ja as n,ka as r,la as _,na as P,o as g,oa as D,v as b,va as I,xa as s,ya as x}from"./chunk-GXYEV7RV.js";var $=a=>["/parties",a],E=(a,o)=>o.id;function O(a,o){a&1&&(i(0,"button",3),d(1,"i",8),n(2," Edit "),t())}function V(a,o){a&1&&d(0,"app-loading",5)}function R(a,o){if(a&1&&(i(0,"div",6),d(1,"i",9),n(2),t()),a&2){let e=c();l(2),_(" ",e.error()," ")}}function U(a,o){if(a&1&&(i(0,"tr")(1,"td"),n(2),t(),i(3,"td")(4,"code"),n(5),t()(),i(6,"td"),n(7),t(),i(8,"td"),n(9),s(10,"currency"),t()()),a&2){let e=o.$implicit;l(2),P("",e.year," ",e.make," ",e.model),l(3),r(e.vin||"\u2014"),l(2),r(e.vehicleUse||"\u2014"),l(2),r(x(10,6,e.statedAmount))}}function j(a,o){if(a&1&&(i(0,"div",11)(1,"div",12)(2,"h5",13),d(3,"i",31),n(4," Vehicles "),t()(),i(5,"div",32)(6,"table",33)(7,"thead",34)(8,"tr")(9,"th"),n(10,"Year/Make/Model"),t(),i(11,"th"),n(12,"VIN"),t(),i(13,"th"),n(14,"Use"),t(),i(15,"th"),n(16,"Value"),t()()(),i(17,"tbody"),v(18,U,11,8,"tr",null,E),t()()()()),a&2){let e=c(2);l(18),C(e.policy().vehicles)}}function z(a,o){if(a&1&&(i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),n(4),t(),i(5,"td"),n(6),t(),i(7,"td"),n(8),s(9,"currency"),t()()),a&2){let e=o.$implicit;l(2),D("",e.address,", ",e.city,", ",e.state," ",e.zip),l(2),r(e.propertyType||"\u2014"),l(2),r(e.yearBuilt||"\u2014"),l(2),r(x(9,7,e.buildingValue))}}function Y(a,o){if(a&1&&(i(0,"div",11)(1,"div",12)(2,"h5",13),d(3,"i",35),n(4," Properties "),t()(),i(5,"div",32)(6,"table",33)(7,"thead",34)(8,"tr")(9,"th"),n(10,"Address"),t(),i(11,"th"),n(12,"Type"),t(),i(13,"th"),n(14,"Year Built"),t(),i(15,"th"),n(16,"Building Value"),t()()(),i(17,"tbody"),v(18,z,10,9,"tr",null,E),t()()()()),a&2){let e=c(2);l(18),C(e.policy().properties)}}function G(a,o){if(a&1&&(d(0,"br"),i(1,"small",37),n(2),t()),a&2){let e=c().$implicit;l(2),r(e.coverageDesc)}}function W(a,o){if(a&1&&(i(0,"tr")(1,"td")(2,"strong"),n(3),t(),m(4,G,3,1),t(),i(5,"td"),n(6),s(7,"currency"),t(),i(8,"td"),n(9),s(10,"currency"),t(),i(11,"td"),n(12),s(13,"currency"),t()()),a&2){let e=o.$implicit;l(3),r(e.coverageCode),l(),p(e.coverageDesc?4:-1),l(2),r(x(7,5,e.limitAmount)),l(3),r(x(10,7,e.deductibleAmount)),l(3),r(x(13,9,e.premiumAmount))}}function X(a,o){if(a&1&&(i(0,"div",11)(1,"div",12)(2,"h5",13),d(3,"i",36),n(4," Coverages "),t()(),i(5,"div",32)(6,"table",33)(7,"thead",34)(8,"tr")(9,"th"),n(10,"Coverage"),t(),i(11,"th"),n(12,"Limit"),t(),i(13,"th"),n(14,"Deductible"),t(),i(15,"th"),n(16,"Premium"),t()()(),i(17,"tbody"),v(18,W,14,11,"tr",null,E),t()()()()),a&2){let e=c(2);l(18),C(e.policy().coverages)}}function q(a,o){if(a&1&&(i(0,"div",28)(1,"span",37),n(2,"Annual Premium"),t(),i(3,"span"),n(4),s(5,"currency"),t()()),a&2){let e=c(2);l(4),r(x(5,1,e.policy().annualPremium))}}function H(a,o){if(a&1&&(i(0,"div",29)(1,"div",38)(2,"h5",13),d(3,"i",9),n(4," Renewal Alert "),t()(),i(5,"div",15)(6,"p",39),n(7," This policy expires in "),i(8,"strong",40),n(9),t()(),i(10,"button",41),d(11,"i",42),n(12," Start Renewal "),t()()()),a&2){let e=c(2);l(9),_("",e.daysUntilExpiration," days")}}function J(a,o){if(a&1&&(i(0,"a",46),n(1),t()),a&2){let e=c().$implicit;f("routerLink",I(2,$,e.partyId)),l(),_(" ",e.party.partyType==="PERSON"?e.party.firstName+" "+e.party.lastName:e.party.commercialName," ")}}function K(a,o){if(a&1&&(i(0,"span"),n(1),t()),a&2){let e=c().$implicit;l(),_("Party ID: ",e.partyId)}}function Q(a,o){if(a&1&&(i(0,"li",45)(1,"div"),m(2,J,2,4,"a",46)(3,K,2,1,"span"),t(),i(4,"span",47),n(5),t()()),a&2){let e=o.$implicit;l(2),p(e.party?2:3),l(3),r(e.role)}}function Z(a,o){if(a&1&&(i(0,"div",30)(1,"div",12)(2,"h5",13),d(3,"i",43),n(4," Involved Parties "),t()(),i(5,"ul",44),v(6,Q,6,2,"li",45,E),t()()),a&2){let e=c(2);l(6),C(e.policy().parties)}}function ee(a,o){if(a&1&&(i(0,"div",7)(1,"div",10)(2,"div",11)(3,"div",12)(4,"h5",13),d(5,"i",14),n(6," Policy Information "),t()(),i(7,"div",15)(8,"div",16)(9,"div",17)(10,"label",18),n(11,"Policy Number"),t(),i(12,"p",19),n(13),t()(),i(14,"div",17)(15,"label",18),n(16,"Line of Business"),t(),i(17,"p",20)(18,"span",21),n(19),t()()(),i(20,"div",17)(21,"label",18),n(22,"Status"),t(),i(23,"p",20)(24,"span",22),n(25),t()()(),i(26,"div",17)(27,"label",18),n(28,"Effective Date"),t(),i(29,"p",20),n(30),s(31,"date"),t()(),i(32,"div",17)(33,"label",18),n(34,"Expiration Date"),t(),i(35,"p",20),n(36),s(37,"date"),t()(),i(38,"div",17)(39,"label",18),n(40,"Carrier"),t(),i(41,"p",20),n(42),t()()()()(),m(43,j,20,0,"div",11),m(44,Y,20,0,"div",11),m(45,X,20,0,"div",11),t(),i(46,"div",23)(47,"div",11)(48,"div",12)(49,"h5",13),d(50,"i",24),n(51," Premium "),t()(),i(52,"div",15)(53,"div",25)(54,"span",26),n(55),s(56,"currency"),t(),i(57,"p",27),n(58,"Written Premium"),t()(),m(59,q,6,3,"div",28),t()(),m(60,H,13,1,"div",29),m(61,Z,8,0,"div",30),t()()),a&2){let e=c();l(13),r(e.policy().policyNumber),l(6),r(e.policy().lineOfBusiness),l(5),f("ngClass",e.getStatusClass(e.policy().policyStatus)),l(),_(" ",e.policy().policyStatus," "),l(5),r(x(31,14,e.policy().effectiveDate)),l(6),r(x(37,16,e.policy().expirationDate)),l(6),r(e.policy().carrierName||"\u2014"),l(),p(e.policy().vehicles&&e.policy().vehicles.length>0?43:-1),l(),p(e.policy().properties&&e.policy().properties.length>0?44:-1),l(),p(e.policy().coverages&&e.policy().coverages.length>0?45:-1),l(10),_(" ",x(56,18,e.policy().writtenPremium||e.policy().annualPremium)," "),l(4),p(e.policy().annualPremium&&e.policy().annualPremium!==e.policy().writtenPremium?59:-1),l(),p(e.policy().policyStatus==="ACTIVE"&&e.daysUntilExpiration<=90?60:-1),l(),p(e.policy().parties&&e.policy().parties.length>0?61:-1)}}var me=(()=>{class a{route=g(M);policyService=g(F);policy=b(null);loading=b(!0);error=b(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&e!=="new"?this.loadPolicy(e):this.loading.set(!1)}loadPolicy(e){this.policyService.getById(e).subscribe({next:u=>{this.policy.set(u),this.loading.set(!1)},error:()=>{this.error.set("Failed to load policy"),this.loading.set(!1)}})}getStatusClass(e){return{ACTIVE:"bg-success",PENDING:"bg-warning text-dark",EXPIRED:"bg-danger",CANCELLED:"bg-dark"}[e]||"bg-secondary"}get daysUntilExpiration(){let e=this.policy();if(!e)return 0;let u=new Date(e.expirationDate),y=new Date;return Math.ceil((u.getTime()-y.getTime())/(1e3*60*60*24))}static \u0275fac=function(u){return new(u||a)};static \u0275cmp=h({type:a,selectors:[["app-policy-detail"]],decls:9,vars:3,consts:[["subtitle","Policy Details",3,"title"],["routerLink","/policies",1,"btn","btn-outline-secondary","me-2"],[1,"bi","bi-arrow-left","me-1"],[1,"btn","btn-primary"],[1,"container-fluid","px-4"],["message","Loading policy details..."],[1,"alert","alert-danger"],[1,"row"],[1,"bi","bi-pencil","me-1"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"col-lg-8"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-file-text","me-2"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label","text-muted","small"],[1,"mb-0","fw-bold","fs-5"],[1,"mb-0"],[1,"badge","bg-primary"],[1,"badge",3,"ngClass"],[1,"col-lg-4"],[1,"bi","bi-currency-dollar","me-2"],[1,"text-center","mb-3"],[1,"fs-2","fw-bold","text-success"],[1,"text-muted","mb-0"],[1,"d-flex","justify-content-between"],[1,"card","mb-4","border-warning"],[1,"card"],[1,"bi","bi-car-front","me-2"],[1,"card-body","p-0"],[1,"table","table-hover","mb-0"],[1,"table-light"],[1,"bi","bi-house","me-2"],[1,"bi","bi-shield-check","me-2"],[1,"text-muted"],[1,"card-header","bg-warning","text-dark"],[1,"mb-2"],[1,"text-danger"],[1,"btn","btn-warning","btn-sm","w-100"],[1,"bi","bi-arrow-repeat","me-1"],[1,"bi","bi-people","me-2"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"text-decoration-none",3,"routerLink"],[1,"badge","bg-secondary"]],template:function(u,y){if(u&1&&(i(0,"app-navbar",0)(1,"a",1),d(2,"i",2),n(3," Back "),t(),m(4,O,3,0,"button",3),t(),i(5,"div",4),m(6,V,1,0,"app-loading",5)(7,R,3,1,"div",6)(8,ee,62,20,"div",7),t()),u&2){let S;f("title",((S=y.policy())==null?null:S.policyNumber)||"New Policy"),l(4),p(y.policy()?4:-1),l(2),p(y.loading()?6:y.error()?7:y.policy()?8:-1)}},dependencies:[B,T,k,A,L,N,w],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e9ecef}.form-label[_ngcontent-%COMP%]{margin-bottom:.25rem}code[_ngcontent-%COMP%]{font-size:.85em}"]})}return a})();export{me as PolicyDetailComponent};
