import{a as I}from"./chunk-JYWANAJK.js";import{a as T,b as M,e as x,g as N,h as B,i as D,k as L}from"./chunk-4ZUVIGTG.js";import{a as A}from"./chunk-R3ZE6C4I.js";import{Aa as f,C as r,J as y,Ka as E,La as S,Sa as h,W as m,X as e,Y as t,Z as c,bb as _,ca as u,ja as n,ka as g,la as v,o as b,v as d,xa as C}from"./chunk-GXYEV7RV.js";var Y=(()=>{class p{bondService=b(_);bonds=d([]);loading=d(!0);searchTerm=d("");filterStatus=d("");filterType=d("");columns=[{key:"bondNumber",label:"Bond #",type:"link",linkPrefix:"/bonds"},{key:"bondType",label:"Type",type:"badge",badgeClass:this.getTypeBadgeClass},{key:"bondStatus",label:"Status",type:"badge",badgeClass:this.getStatusBadgeClass},{key:"effectiveDate",label:"Effective",type:"date"},{key:"expirationDate",label:"Expiration",type:"date"},{key:"penaltyAmount",label:"Penalty",type:"currency"},{key:"suretyCarrier",label:"Carrier"}];ngOnInit(){this.loadBonds()}loadBonds(){this.loading.set(!0),this.bondService.list().subscribe({next:i=>{this.bonds.set(i.items),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}getTypeBadgeClass(i){return{CONTRACT:"bg-primary",COMMERCIAL:"bg-info",COURT:"bg-secondary",FIDELITY:"bg-warning text-dark"}[i]||"bg-secondary"}getStatusBadgeClass(i){return{ACTIVE:"bg-success",PENDING:"bg-warning text-dark",EXPIRED:"bg-danger",CANCELLED:"bg-dark",RELEASED:"bg-info"}[i]||"bg-secondary"}get filteredBonds(){let i=this.bonds(),a=this.searchTerm().toLowerCase(),o=this.filterStatus(),s=this.filterType();return a&&(i=i.filter(l=>l.bondNumber.toLowerCase().includes(a)||l.projectName?.toLowerCase().includes(a))),o&&(i=i.filter(l=>l.bondStatus===o)),s&&(i=i.filter(l=>l.bondType===s)),i}get totalPenalty(){return this.bonds().reduce((i,a)=>i+(a.penaltyAmount||0),0)}get activeBondsCount(){return this.bonds().filter(i=>i.bondStatus==="ACTIVE").length}static \u0275fac=function(a){return new(a||p)};static \u0275cmp=y({type:p,selectors:[["app-bond-list"]],decls:68,vars:15,consts:[["title","Surety Bonds","subtitle","Manage surety bonds"],["routerLink","/bonds/new",1,"btn","btn-primary"],[1,"bi","bi-plus-lg","me-1"],[1,"container-fluid","px-4"],[1,"row","mb-4"],[1,"col-md-4"],[1,"card","bg-success","bg-opacity-10","border-success"],[1,"card-body","text-center"],[1,"text-success","mb-0"],[1,"text-muted"],[1,"card","bg-primary","bg-opacity-10","border-primary"],[1,"text-primary","mb-0"],[1,"card","bg-secondary","bg-opacity-10"],[1,"mb-0"],[1,"card","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Search by bond number or project...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","ACTIVE"],["value","PENDING"],["value","EXPIRED"],["value","CANCELLED"],["value","RELEASED"],["value","CONTRACT"],["value","COMMERCIAL"],["value","COURT"],["value","FIDELITY"],[1,"col-md-4","text-end"],[1,"card"],[1,"card-body","p-0"],["emptyMessage","No bonds found",3,"columns","data","loading"]],template:function(a,o){a&1&&(e(0,"app-navbar",0)(1,"a",1),c(2,"i",2),n(3," New Bond "),t()(),e(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h3",8),n(10),t(),e(11,"small",9),n(12,"Active Bonds"),t()()()(),e(13,"div",5)(14,"div",10)(15,"div",7)(16,"h3",11),n(17),C(18,"currency"),t(),e(19,"small",9),n(20,"Total Exposure"),t()()()(),e(21,"div",5)(22,"div",12)(23,"div",7)(24,"h3",13),n(25),t(),e(26,"small",9),n(27,"Total Bonds"),t()()()()(),e(28,"div",14)(29,"div",15)(30,"div",16)(31,"div",5)(32,"div",17)(33,"span",18),c(34,"i",19),t(),e(35,"input",20),u("ngModelChange",function(l){return o.searchTerm.set(l)}),t()()(),e(36,"div",21)(37,"select",22),u("ngModelChange",function(l){return o.filterStatus.set(l)}),e(38,"option",23),n(39,"All Statuses"),t(),e(40,"option",24),n(41,"Active"),t(),e(42,"option",25),n(43,"Pending"),t(),e(44,"option",26),n(45,"Expired"),t(),e(46,"option",27),n(47,"Cancelled"),t(),e(48,"option",28),n(49,"Released"),t()()(),e(50,"div",21)(51,"select",22),u("ngModelChange",function(l){return o.filterType.set(l)}),e(52,"option",23),n(53,"All Types"),t(),e(54,"option",29),n(55,"Contract"),t(),e(56,"option",30),n(57,"Commercial"),t(),e(58,"option",31),n(59,"Court"),t(),e(60,"option",32),n(61,"Fidelity"),t()()(),e(62,"div",33)(63,"span",9),n(64),t()()()()(),e(65,"div",34)(66,"div",35),c(67,"app-data-table",36),t()()()),a&2&&(r(10),g(o.activeBondsCount),r(7),g(f(18,10,o.totalPenalty,"USD","symbol","1.0-0")),r(8),g(o.bonds().length),r(10),m("ngModel",o.searchTerm()),r(2),m("ngModel",o.filterStatus()),r(14),m("ngModel",o.filterType()),r(13),v(" ",o.filteredBonds.length," bonds "),r(3),m("columns",o.columns)("data",o.filteredBonds)("loading",o.loading()))},dependencies:[S,h,L,B,D,T,N,M,x,A,I,E],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}"]})}return p})();export{Y as BondListComponent};
