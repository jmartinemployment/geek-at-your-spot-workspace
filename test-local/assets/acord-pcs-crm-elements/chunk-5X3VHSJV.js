import{a as P}from"./chunk-X3P5IQZN.js";import{a as A}from"./chunk-R3ZE6C4I.js";import{C as a,Ga as T,Ia as B,J as E,Ka as h,La as I,Pa as w,R as m,S as c,Sa as N,U as S,V as y,W as u,X as i,Y as t,Z as l,bb as L,da as p,ja as o,ka as b,la as s,o as f,v,va as D,xa as C,ya as _}from"./chunk-GXYEV7RV.js";var k=n=>["/parties",n],M=(n,d)=>d.id;function j(n,d){n&1&&(i(0,"button",3),l(1,"i",8),o(2," Edit "),t())}function R(n,d){n&1&&l(0,"app-loading",5)}function O(n,d){if(n&1&&(i(0,"div",6),l(1,"i",9),o(2),t()),n&2){let e=p();a(2),s(" ",e.error()," ")}}function F(n,d){if(n&1&&(i(0,"span",22),o(1),t()),n&2){let e=p(2);a(),b(e.bond().bondSubType)}}function U(n,d){if(n&1&&(i(0,"div",39)(1,"label",18),o(2,"Project Name"),t(),i(3,"p",42),o(4),t()()),n&2){let e=p(3);a(4),b(e.bond().projectName)}}function $(n,d){if(n&1&&(i(0,"div",41)(1,"label",18),o(2,"Contract Description"),t(),i(3,"p",20),o(4),t()()),n&2){let e=p(3);a(4),b(e.bond().contractDescription)}}function V(n,d){if(n&1&&(i(0,"div",17)(1,"label",18),o(2,"Contract Amount"),t(),i(3,"p",43),o(4),C(5,"currency"),t()()),n&2){let e=p(3);a(4),b(_(5,1,e.bond().contractAmount))}}function G(n,d){if(n&1&&(i(0,"div",11)(1,"div",12)(2,"h5",13),l(3,"i",38),o(4," Project Details "),t()(),i(5,"div",15)(6,"div",16),m(7,U,5,1,"div",39),i(8,"div",17)(9,"label",18),o(10,"Location"),t(),i(11,"p",20),l(12,"i",40),o(13),t()(),m(14,$,5,1,"div",41),m(15,V,6,3,"div",17),t()()()),n&2){let e=p(2);a(7),c(e.bond().projectName?7:-1),a(6),s(" ",e.projectLocation," "),a(),c(e.bond().contractDescription?14:-1),a(),c(e.bond().contractAmount?15:-1)}}function X(n,d){if(n&1&&(i(0,"a",48),o(1),t()),n&2){let e=p().$implicit;u("routerLink",D(2,k,e.partyId)),a(),s(" ",e.party.partyType==="PERSON"?e.party.firstName+" "+e.party.lastName:e.party.commercialName," ")}}function Y(n,d){if(n&1&&o(0),n&2){let e=p().$implicit;s(" Party ID: ",e.partyId," ")}}function q(n,d){if(n&1&&(i(0,"tr")(1,"td"),m(2,X,2,4,"a",48)(3,Y,1,1),t(),i(4,"td")(5,"span",49),o(6),t()()()),n&2){let e=d.$implicit;a(2),c(e.party?2:3),a(4),b(e.role)}}function z(n,d){if(n&1&&(i(0,"div",11)(1,"div",12)(2,"h5",13),l(3,"i",44),o(4," Involved Parties "),t()(),i(5,"div",45)(6,"table",46)(7,"thead",47)(8,"tr")(9,"th"),o(10,"Name"),t(),i(11,"th"),o(12,"Role"),t()()(),i(13,"tbody"),S(14,q,7,2,"tr",null,M),t()()()()),n&2){let e=p(2);a(14),y(e.bond().parties)}}function H(n,d){if(n&1&&(i(0,"div",28)(1,"span",50),o(2,"Premium"),t(),i(3,"span",51),o(4),C(5,"currency"),t()()),n&2){let e=p(2);a(4),b(_(5,1,e.bond().premiumAmount))}}function J(n,d){if(n&1&&(i(0,"div",29)(1,"div",52)(2,"h5",13),l(3,"i",9),o(4," Expiration Alert "),t()(),i(5,"div",15)(6,"p",53),o(7," This bond expires in "),i(8,"strong",54),o(9),t()(),i(10,"button",55),l(11,"i",56),o(12," Process Renewal "),t()()()),n&2){let e=p(2);a(9),s("",e.daysUntilExpiration," days")}}function K(n,d){n&1&&(i(0,"button",37),l(1,"i",57),o(2," Increase Penalty "),t())}function Q(n,d){if(n&1&&(i(0,"div",7)(1,"div",10)(2,"div",11)(3,"div",12)(4,"h5",13),l(5,"i",14),o(6," Bond Information "),t()(),i(7,"div",15)(8,"div",16)(9,"div",17)(10,"label",18),o(11,"Bond Number"),t(),i(12,"p",19),o(13),t()(),i(14,"div",17)(15,"label",18),o(16,"Bond Type"),t(),i(17,"p",20)(18,"span",21),o(19),t(),m(20,F,2,1,"span",22),t()(),i(21,"div",17)(22,"label",18),o(23,"Status"),t(),i(24,"p",20)(25,"span",21),o(26),t()()(),i(27,"div",17)(28,"label",18),o(29,"Effective Date"),t(),i(30,"p",20),o(31),C(32,"date"),t()(),i(33,"div",17)(34,"label",18),o(35,"Expiration Date"),t(),i(36,"p",20),o(37),C(38,"date"),t()(),i(39,"div",17)(40,"label",18),o(41,"Surety Carrier"),t(),i(42,"p",20),o(43),t()()()()(),m(44,G,16,4,"div",11),m(45,z,16,0,"div",11),t(),i(46,"div",23)(47,"div",11)(48,"div",12)(49,"h5",13),l(50,"i",24),o(51," Financial "),t()(),i(52,"div",15)(53,"div",25)(54,"span",26),o(55),C(56,"currency"),t(),i(57,"p",27),o(58,"Penalty Amount"),t()(),m(59,H,6,3,"div",28),t()(),m(60,J,13,1,"div",29),i(61,"div",30)(62,"div",12)(63,"h5",13),l(64,"i",31),o(65," Actions "),t()(),i(66,"div",15)(67,"div",32)(68,"button",33),l(69,"i",34),o(70," Print Bond "),t(),i(71,"button",35),l(72,"i",36),o(73," Add Note "),t(),m(74,K,3,0,"button",37),t()()()()()),n&2){let e=p();a(13),b(e.bond().bondNumber),a(5),u("ngClass",e.getTypeClass(e.bond().bondType)),a(),s(" ",e.bond().bondType," "),a(),c(e.bond().bondSubType?20:-1),a(5),u("ngClass",e.getStatusClass(e.bond().bondStatus)),a(),s(" ",e.bond().bondStatus," "),a(5),b(_(32,15,e.bond().effectiveDate)),a(6),b(e.bond().expirationDate?_(38,17,e.bond().expirationDate):"Continuous"),a(6),b(e.bond().suretyCarrier||"\u2014"),a(),c(e.bond().bondType==="CONTRACT"&&(e.bond().projectName||e.bond().contractDescription)?44:-1),a(),c(e.bond().parties&&e.bond().parties.length>0?45:-1),a(10),s(" ",_(56,19,e.bond().penaltyAmount)," "),a(4),c(e.bond().premiumAmount?59:-1),a(),c(e.bond().bondStatus==="ACTIVE"&&e.daysUntilExpiration!==null&&e.daysUntilExpiration<=90?60:-1),a(14),c(e.bond().bondStatus==="ACTIVE"?74:-1)}}var le=(()=>{class n{route=f(w);bondService=f(L);bond=v(null);loading=v(!0);error=v(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&e!=="new"?this.loadBond(e):this.loading.set(!1)}loadBond(e){this.bondService.getById(e).subscribe({next:r=>{this.bond.set(r),this.loading.set(!1)},error:()=>{this.error.set("Failed to load bond"),this.loading.set(!1)}})}getStatusClass(e){return{ACTIVE:"bg-success",PENDING:"bg-warning text-dark",EXPIRED:"bg-danger",CANCELLED:"bg-dark",RELEASED:"bg-info"}[e]||"bg-secondary"}getTypeClass(e){return{CONTRACT:"bg-primary",COMMERCIAL:"bg-info",COURT:"bg-secondary",FIDELITY:"bg-warning text-dark"}[e]||"bg-secondary"}get projectLocation(){let e=this.bond();if(!e)return"\u2014";let r=[e.projectCity,e.projectState].filter(Boolean);return r.length>0?r.join(", "):"\u2014"}get daysUntilExpiration(){let e=this.bond();if(!e||!e.expirationDate)return null;let r=new Date(e.expirationDate),x=new Date;return Math.ceil((r.getTime()-x.getTime())/(1e3*60*60*24))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=E({type:n,selectors:[["app-bond-detail"]],decls:9,vars:3,consts:[["subtitle","Bond Details",3,"title"],["routerLink","/bonds",1,"btn","btn-outline-secondary","me-2"],[1,"bi","bi-arrow-left","me-1"],[1,"btn","btn-primary"],[1,"container-fluid","px-4"],["message","Loading bond details..."],[1,"alert","alert-danger"],[1,"row"],[1,"bi","bi-pencil","me-1"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"col-lg-8"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-shield-check","me-2"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label","text-muted","small"],[1,"mb-0","fw-bold","fs-5"],[1,"mb-0"],[1,"badge",3,"ngClass"],[1,"badge","bg-light","text-dark","ms-1"],[1,"col-lg-4"],[1,"bi","bi-currency-dollar","me-2"],[1,"text-center","mb-3"],[1,"fs-2","fw-bold","text-primary"],[1,"text-muted","mb-0"],[1,"d-flex","justify-content-between"],[1,"card","mb-4","border-warning"],[1,"card"],[1,"bi","bi-lightning","me-2"],[1,"d-grid","gap-2"],[1,"btn","btn-outline-primary"],[1,"bi","bi-printer","me-1"],[1,"btn","btn-outline-secondary"],[1,"bi","bi-file-earmark-plus","me-1"],[1,"btn","btn-outline-info"],[1,"bi","bi-building","me-2"],[1,"col-md-8"],[1,"bi","bi-geo-alt","me-1"],[1,"col-12"],[1,"mb-0","fw-medium"],[1,"mb-0","fs-5","fw-bold","text-primary"],[1,"bi","bi-people","me-2"],[1,"card-body","p-0"],[1,"table","table-hover","mb-0"],[1,"table-light"],[1,"text-decoration-none",3,"routerLink"],[1,"badge","bg-secondary"],[1,"text-muted"],[1,"fw-bold"],[1,"card-header","bg-warning","text-dark"],[1,"mb-2"],[1,"text-danger"],[1,"btn","btn-warning","btn-sm","w-100"],[1,"bi","bi-arrow-repeat","me-1"],[1,"bi","bi-arrow-up-circle","me-1"]],template:function(r,x){if(r&1&&(i(0,"app-navbar",0)(1,"a",1),l(2,"i",2),o(3," Back "),t(),m(4,j,3,0,"button",3),t(),i(5,"div",4),m(6,R,1,0,"app-loading",5)(7,O,3,1,"div",6)(8,Q,75,21,"div",7),t()),r&2){let g;u("title",((g=x.bond())==null?null:g.bondNumber)||"New Bond"),a(4),c(x.bond()?4:-1),a(2),c(x.loading()?6:x.error()?7:x.bond()?8:-1)}},dependencies:[I,T,N,A,P,h,B],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e9ecef}.form-label[_ngcontent-%COMP%]{margin-bottom:.25rem}"]})}return n})();export{le as BondDetailComponent};
