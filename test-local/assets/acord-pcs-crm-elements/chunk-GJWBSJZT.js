import{a as H}from"./chunk-X3P5IQZN.js";import{a as K}from"./chunk-R3ZE6C4I.js";import{$ as f,Aa as V,C as l,Ia as G,J as k,Ja as q,Ka as N,R as u,S as b,Sa as z,U as C,V as h,W as _,X as i,Y as e,Z as c,Za as J,_ as E,aa as M,da as p,ga as P,ha as $,ia as w,ja as a,ka as r,la as S,ma as R,o as j,sa as W,ua as I,v as T,va as U,xa as x,ya as D,za as L}from"./chunk-GXYEV7RV.js";function Y(t,o){if(t&1&&(a(0),x(1,"currency")),t&2){let n=p();S(" ",V(1,1,n.value,"USD","symbol","1.0-0")," ")}}function Z(t,o){if(t&1&&(a(0),x(1,"number")),t&2){let n=p();S(" ",D(1,1,n.value)," ")}}function ee(t,o){if(t&1&&(E(0,"small"),M(1,"i",9),a(2),f()),t&2){let n=p();w(n.change>=0?"text-success":"text-danger"),l(),$("bi-arrow-up",n.change>=0)("bi-arrow-down",n.change<0),l(),S(" ",n.change,"% from last month ")}}var O=()=>[],te=t=>["/policies",t],Q=(t,o)=>o.id,X=(t,o)=>o.status;function ie(t,o){t&1&&c(0,"app-loading",2)}function ne(t,o){if(t&1&&(i(0,"tr")(1,"td")(2,"a",55),a(3),e()(),i(4,"td"),a(5),e(),i(6,"td"),a(7),x(8,"date"),e(),i(9,"td",54),a(10),x(11,"currency"),e()()),t&2){let n=o.$implicit;l(2),_("routerLink",U(10,te,n.id)),l(),S(" ",n.policyNumber," "),l(2),r((n.parties==null||n.parties[0]==null||n.parties[0].party==null?null:n.parties[0].party.fullName)||"-"),l(2),r(L(8,5,n.expirationDate,"shortDate")),l(3),r(D(11,8,n.annualPremium))}}function ae(t,o){if(t&1&&(i(0,"div",24)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),a(5,"Policy"),e(),i(6,"th"),a(7,"Insured"),e(),i(8,"th"),a(9,"Expires"),e(),i(10,"th",54),a(11,"Premium"),e()()(),i(12,"tbody"),C(13,ne,12,12,"tr",null,Q),e()()()),t&2){let n=p(2);l(13),h((n.data().renewals.thisWeek||I(0,O)).concat(n.data().renewals.thisMonth||I(1,O)).slice(0,5))}}function le(t,o){t&1&&(i(0,"p",25),a(1,"No policies expiring soon"),e())}function oe(t,o){if(t&1&&(i(0,"div",56)(1,"span")(2,"span",57),a(3),e()(),i(4,"strong"),a(5),e()()),t&2){let n=o.$implicit,d=p(3);l(2),w(d.getStatusBadgeClass(n.status)),l(),r(n.status),l(2),r(n.count)}}function de(t,o){if(t&1&&(i(0,"div",13),C(1,oe,6,4,"div",56,X),e()),t&2){let n=p(2);l(),h(n.data().claims.byStatus)}}function re(t,o){if(t&1&&(i(0,"small",59),a(1),x(2,"currency"),e()),t&2){let n=p().$implicit;l(),r(D(2,1,n.estimatedPremium))}}function me(t,o){if(t&1&&(i(0,"div",56)(1,"span",58),a(2),e(),i(3,"div",54)(4,"strong"),a(5),e(),u(6,re,3,3,"small",59),e()()),t&2){let n=o.$implicit;l(2),r(n.status),l(3),r(n.count),l(),b(n.estimatedPremium?6:-1)}}function ce(t,o){if(t&1&&(i(0,"div",45),C(1,me,7,3,"div",56,X),e()),t&2){let n=p(2);l(),h(n.data().leads.byStatus)}}function se(t,o){t&1&&(i(0,"p",46),a(1,"No leads in pipeline"),e())}function pe(t,o){if(t&1&&(i(0,"div",51)(1,"div",60)(2,"small",21),c(3,"i",61),a(4),e(),i(5,"small",21),a(6),x(7,"date"),e()(),i(8,"p",62),a(9),e()()),t&2){let n=o.$implicit;l(4),R(" ",n.action," ",n.entityType," "),l(2),r(L(7,4,n.createdAt,"short")),l(3),r(n.userName)}}function ue(t,o){t&1&&(i(0,"div",52),a(1," No recent activity "),e())}function be(t,o){if(t&1&&(i(0,"div",3)(1,"div",4),c(2,"app-stats-card",5),e(),i(3,"div",4),c(4,"app-stats-card",6),e(),i(5,"div",4),c(6,"app-stats-card",7),e(),i(7,"div",4),c(8,"app-stats-card",8),e()(),i(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"h5",13),c(14,"i",14),a(15,"Renewal Pipeline"),e(),i(16,"a",15),a(17,"View All"),e()(),i(18,"div",16)(19,"div",17)(20,"div",18)(21,"div",19)(22,"h3",20),a(23),e(),i(24,"small",21),a(25,"This Week"),e()()(),i(26,"div",18)(27,"div",19)(28,"h3",22),a(29),e(),i(30,"small",21),a(31,"This Month"),e()()(),i(32,"div",18)(33,"div",19)(34,"h3",23),a(35),e(),i(36,"small",21),a(37,"Next Month"),e()()()(),u(38,ae,15,2,"div",24)(39,le,2,0,"p",25),e()()(),i(40,"div",10)(41,"div",11)(42,"div",12)(43,"h5",13),c(44,"i",26),a(45,"Claims Overview"),e(),i(46,"a",27),a(47,"View All"),e()(),i(48,"div",16)(49,"div",17)(50,"div",28)(51,"div",19)(52,"h3",29),a(53),e(),i(54,"small",21),a(55,"Open Claims"),e()()(),i(56,"div",28)(57,"div",19)(58,"h3",29),a(59),e(),i(60,"small",21),a(61,"Recent"),e()()()(),u(62,de,3,0,"div",13),e()()(),i(63,"div",30)(64,"div",11)(65,"div",12)(66,"h5",13),c(67,"i",31),a(68,"Tasks"),e(),i(69,"a",32),a(70,"View All"),e()(),i(71,"div",16)(72,"div",33)(73,"div",34)(74,"span"),c(75,"i",35),a(76,"Overdue"),e(),i(77,"span",36),a(78),e()(),i(79,"div",37)(80,"span"),c(81,"i",38),a(82,"Due Today"),e(),i(83,"span",39),a(84),e()(),i(85,"div",40)(86,"span"),c(87,"i",41),a(88,"Upcoming"),e(),i(89,"span",42),a(90),e()()()()()(),i(91,"div",30)(92,"div",11)(93,"div",12)(94,"h5",13),c(95,"i",43),a(96,"Lead Pipeline"),e(),i(97,"a",44),a(98,"View All"),e()(),i(99,"div",16),u(100,ce,3,0,"div",45)(101,se,2,0,"p",46),e()()(),i(102,"div",30)(103,"div",11)(104,"div",47)(105,"h5",13),c(106,"i",48),a(107,"Recent Activity"),e()(),i(108,"div",49)(109,"div",50),C(110,pe,10,7,"div",51,Q,!1,ue,2,0,"div",52),e()()()()()),t&2){let n,d,s,v,g,y,A,F,B,m=p();l(2),_("value",m.data().stats.policies.active),l(2),_("value",m.data().stats.parties.total),l(2),_("value",m.data().stats.claims.open),l(2),_("value",m.data().stats.leads.new),l(15),r(((n=m.data().renewals.thisWeek)==null?null:n.length)||0),l(6),r(((d=m.data().renewals.thisMonth)==null?null:d.length)||0),l(6),r(((s=m.data().renewals.nextMonth)==null?null:s.length)||0),l(3),b((v=m.data().renewals.thisWeek)!=null&&v.length||(v=m.data().renewals.thisMonth)!=null&&v.length?38:39),l(15),r(m.data().stats.claims.open),l(6),r(((g=m.data().claims.recentClaims)==null?null:g.length)||0),l(3),b((y=m.data().claims.byStatus)!=null&&y.length?62:-1),l(16),r(m.data().tasks.overdue),l(6),r(m.data().tasks.dueToday),l(6),r(((A=m.data().tasks.upcoming)==null?null:A.length)||0),l(10),b((F=m.data().leads.byStatus)!=null&&F.length?100:101),l(10),h(((B=m.data().recentActivity)==null?null:B.slice(0,6))||I(16,O))}}var xe=(()=>{class t{label="";value=0;icon="bi-graph-up";bgColor="#e3f2fd";iconColor="#1976d2";isCurrency=!1;change;static \u0275fac=function(d){return new(d||t)};static \u0275cmp=k({type:t,selectors:[["app-stats-card"]],inputs:{label:"label",value:"value",icon:"icon",bgColor:"bgColor",iconColor:"iconColor",isCurrency:"isCurrency",change:"change"},decls:13,vars:10,consts:[[1,"card","h-100","border-0","shadow-sm"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0"],[1,"icon-box","rounded","d-flex","align-items-center","justify-content-center"],[1,"flex-grow-1","ms-3"],[1,"text-muted","small","mb-1"],[1,"mb-0","fw-bold"],[3,"class"],[1,"bi"]],template:function(d,s){d&1&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),M(5,"i"),f()(),E(6,"div",5)(7,"p",6),a(8),f(),E(9,"h3",7),u(10,Y,2,6)(11,Z,2,3),f(),u(12,ee,3,7,"small",8),f()()()()),d&2&&(l(4),P("background-color",s.bgColor),l(),w(W("bi ",s.icon," fs-4")),P("color",s.iconColor),l(3),r(s.label),l(2),b(s.isCurrency?10:11),l(2),b(s.change!==void 0?12:-1))},dependencies:[q,N],styles:[".icon-box[_ngcontent-%COMP%]{width:48px;height:48px}"]})}return t})(),we=(()=>{class t{dashboardService=j(J);loading=T(!0);data=T(null);ngOnInit(){this.loadDashboard()}loadDashboard(){this.loading.set(!0),this.dashboardService.getOverview().subscribe({next:n=>{this.data.set(n),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}getStatusBadgeClass(n){return{OPEN:"bg-warning",CLOSED:"bg-success",DENIED:"bg-danger",SUBROGATION:"bg-info",LITIGATION:"bg-dark"}[n]||"bg-secondary"}getLeadPercent(n){let d=this.data();if(!d||!d.leads.byStatus)return 0;let s=d.leads.byStatus.reduce((g,y)=>g+y.count,0);if(s===0)return 0;let v=d.leads.byStatus.find(g=>g.status===n);return Math.max(10,(v?.count||0)/s*100)}getActivityIcon(n){return{CALL:"bi-telephone",EMAIL:"bi-envelope",MEETING:"bi-calendar-event",TASK:"bi-check-square",NOTE:"bi-sticky",FOLLOW_UP:"bi-arrow-repeat"}[n]||"bi-circle"}static \u0275fac=function(d){return new(d||t)};static \u0275cmp=k({type:t,selectors:[["app-dashboard"]],decls:4,vars:1,consts:[["title","Dashboard","subtitle","Overview"],[1,"p-4"],["message","Loading dashboard..."],[1,"row","g-4","mb-4"],[1,"col-md-6","col-lg-3"],["label","Active Policies","icon","bi-file-earmark-text","bgColor","#e3f2fd","iconColor","#1976d2",3,"value"],["label","Total Parties","icon","bi-people","bgColor","#e8f5e9","iconColor","#388e3c",3,"value"],["label","Open Claims","icon","bi-exclamation-triangle","bgColor","#fff3e0","iconColor","#f57c00",3,"value"],["label","New Leads","icon","bi-funnel","bgColor","#f3e5f5","iconColor","#7b1fa2",3,"value"],[1,"row","g-4"],[1,"col-lg-6"],[1,"card","border-0","shadow-sm","h-100"],[1,"card-header","bg-white","border-0","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-calendar-event","me-2","text-primary"],["routerLink","/policies",1,"btn","btn-sm","btn-outline-primary"],[1,"card-body"],[1,"row","text-center","mb-4"],[1,"col-4"],[1,"border","rounded","p-3"],[1,"mb-1","text-danger"],[1,"text-muted"],[1,"mb-1","text-warning"],[1,"mb-1","text-info"],[1,"table-responsive"],[1,"text-muted","text-center","mb-0"],[1,"bi","bi-exclamation-triangle","me-2","text-warning"],["routerLink","/claims",1,"btn","btn-sm","btn-outline-primary"],[1,"col-6"],[1,"mb-1"],[1,"col-lg-4"],[1,"bi","bi-check2-square","me-2","text-success"],["routerLink","/activities",1,"btn","btn-sm","btn-outline-primary"],[1,"d-flex","flex-column","gap-3"],[1,"d-flex","justify-content-between","align-items-center","p-3","bg-danger","bg-opacity-10","rounded"],[1,"bi","bi-exclamation-circle","text-danger","me-2"],[1,"badge","bg-danger","fs-6"],[1,"d-flex","justify-content-between","align-items-center","p-3","bg-warning","bg-opacity-10","rounded"],[1,"bi","bi-clock","text-warning","me-2"],[1,"badge","bg-warning","fs-6"],[1,"d-flex","justify-content-between","align-items-center","p-3","bg-info","bg-opacity-10","rounded"],[1,"bi","bi-calendar","text-info","me-2"],[1,"badge","bg-info","fs-6"],[1,"bi","bi-funnel","me-2","text-purple"],["routerLink","/leads",1,"btn","btn-sm","btn-outline-primary"],[1,"d-flex","flex-column","gap-2"],[1,"text-muted","text-center"],[1,"card-header","bg-white","border-0"],[1,"bi","bi-activity","me-2","text-info"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],[1,"list-group-item","border-0"],[1,"list-group-item","border-0","text-center","text-muted"],[1,"table","table-sm"],[1,"text-end"],[1,"text-decoration-none",3,"routerLink"],[1,"d-flex","justify-content-between","align-items-center","py-2","border-bottom"],[1,"badge","me-2"],[1,"badge","bg-secondary"],[1,"text-muted","d-block"],[1,"d-flex","w-100","justify-content-between"],[1,"bi","bi-circle-fill","me-1",2,"font-size","0.5rem"],[1,"mb-1","small"]],template:function(d,s){d&1&&(c(0,"app-navbar",0),i(1,"div",1),u(2,ie,1,0,"app-loading",2)(3,be,113,17),e()),d&2&&(l(2),b(s.loading()?2:s.data()?3:-1))},dependencies:[z,K,xe,H,N,G],styles:[".stage-badge[_ngcontent-%COMP%]{width:80px}.stage-progress[_ngcontent-%COMP%]{height:20px}"]})}return t})();export{we as DashboardComponent};
