<!-- Full-Page Loading Spinner -->
<div *ngIf="isLoading" class="loading-overlay">
  <div class="spinner-border text-light" role="status" style="width: 4rem; height: 4rem;">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<!-- Main Form Section -->
<section class="container-fluid geek-quote-banner px-5 py-5 mb-2">
  <div class="row align-items-center mx-auto">
    <h3 class="card-title fw-bold text-white text-center">Geek @ Your Spot AI Quote</h3>
    <h4 class="card-text text-white text-center">Get your project estimate</h4>
  </div>

  <div class="container">
    <form (submit)="sendMessage($event)" style="width: 100%;">
      <fieldset>
        <div class="row mx-auto">
          <div class="col">
            <textarea
              class="form-control"
              style="width: 100%;"
              [(ngModel)]="userInput"
              name="userInput"
              placeholder="How can I help you today?"
              [disabled]="isThinking()"
              autocomplete="off"
              rows="4"
              (keydown.enter)="$event.preventDefault(); sendMessage($event)">
            </textarea>
          </div>
        </div>
        <div class="col-12 mx-auto text-center mt-3">
          <button
            type="submit"
            class="btn btn-light mx-auto fw-bold"
            [disabled]="!userInput.trim() || isThinking()">
            <span>Send Message</span>
          </button>
        </div>
      </fieldset>
    </form>
  </div>
</section>

<!-- Dialog Component -->
<lib-dialog
  [messages]="messages"
  [isSending]="isLoading"
  (messageSent)="onDialogMessage($event)">
</lib-dialog>
